<h1 id="setup-ssh-guide">Setup SSH Guide</h1>
<h2 id="installation">Installation</h2>
<ul>
  <li>Make sure that your server and your client computer are in the same network. The easiest way to do this is to make sure that the network addapter in the viertual machine is set to bridge instead of nat. To do this go, open the virtual machine settings and in the network section change the adapter to Bridge.</li>
</ul>

<p><img src="/assets/networkadapter.png" alt="network adapter" /></p>

<ul>
  <li>However, your network may prevent you from doing this. Some IDS and smart routers may prevent you from getting an IP. In this case, you need to use <a href="https://learn.g2.com/port-forwarding">port forwarding</a> in your virtual machine. Here is a <a href="shorturl.at/ckHR8">guide</a> on how to do it.
    <h3 id="portforwarding-example">Portforwarding Example</h3>
    <p><img src="/assets/portforwardingvirtualbox.png" alt="portforwarding" /></p>
  </li>
  <li>Make sure that the ssh server program is installed in the server virtual machine
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install openssh-server -y
</code></pre></div>    </div>
  </li>
  <li>Make sure that the ssh client program is installed in the client machine. This is the computer that you will be using to manage your server.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install openssh-server -y
</code></pre></div>    </div>
  </li>
  <li>Enable and start ssh in the server:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl enable ssh; sudo systemctl start ssh
</code></pre></div>    </div>
  </li>
  <li>Test the connection by loging in to the server from the client. First, use the ip or hostname command to find out the ip address of the server.</li>
  <li>On the server type, <code class="language-plaintext highlighter-rouge">hostname -I</code> this will give you the ip address of your server.</li>
  <li>On the client type:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh username@server-ip-address
</code></pre></div>    </div>
  </li>
  <li>If you are using port forwarding, your command will be:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -p 2222 username@127.0.0.1
</code></pre></div></div>

<ul>
  <li>Read and answer the questions and you will connect sucessfully.</li>
</ul>

<h2 id="setup-private-and-public-key-authentication-with-or-without-password">Setup private and public key authentication with or without password:</h2>
<ul>
  <li>On the server, configure the firewall to accept ssh connections.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ufw allow ssh
sudo ufw enable
sudo ufw status
</code></pre></div>    </div>
  </li>
  <li>Now we need to generate an ssh key in our client computer. If you are using your ubuntu machine from the course, then you already have one. If you are not, then you must create the ssh keys:</li>
  <li>In your client machine type:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
</code></pre></div>    </div>
  </li>
  <li>Now you can type this command to copy your ssh key to the server
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id -i .ssh/id_rsa.pub webmaster@server-ip-address
</code></pre></div>    </div>
  </li>
  <li>if you are using port forwarding, use this command instead:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id -i .ssh/id_rsa.pub -p 2222 webmaster@127.0.0.1
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>if you use port forwarding your command will be:</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id -p 2222 username@127.0.0.1
</code></pre></div></div>

<ul>
  <li>Now you can connect to your server without having to remember the password.</li>
</ul>

